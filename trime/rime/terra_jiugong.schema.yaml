# Rime schema
# encoding: utf-8

schema:
  schema_id: terra_jiugong
  name: 地球九宫
  version: "0.19"
  author:
    - 佛振 <chen.sst@gmail.com>
    - Uncle光 <467896722@qq.com>
  description: |
    「漢語拼音」，以符號按鍵 - / < \ 輸入四聲
    拼音碼表根據 CC-CEDICT 改編
  dependencies:
    - liangfen

switches:
  - name: ascii_punct
    states: [ 。，, ．， ]
  - name: full_shape
    states: [ 半角, 全角 ]
#  - name: simplification
    #states: [ 漢字, 汉字 ]
  - name: ascii_mode
    reset: 0
    states: [ 中文, 123 ]
  - name: show_es
    reset: 0
    states: [ 😔, 😀 ]
  - options: [ zh_trad, dzing, nippon, zht2zhs, custom ]
    states:
      - 字形 → 傳統漢字
      - 字形 → 叔寍正體
      - 字形 → 日本新字体
      - 字形 → 大陆简化字
      - 字形 → 我流
    reset: 3

es_conversion:
  opencc_config: es.json
  option_name: show_es

nippon:
  opencc_config: s2jp.json
  option_name: nippon

simplifier:
  option_name: zht2zhs
  #opencc_config: tw2s.json
  #tips: all

custom:
  option_name: custom
  opencc_config: custom.json
  #tips: all

dzing:
  option_name: dzing
  opencc_config: dzing.json
  tips: all

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator@custom_phrase
    - reverse_lookup_translator
    - script_translator
  filters:
    - simplifier@dzing
    - simplifier@nippon
    - simplifier
    - simplifier@custom
    - simplifier@es_conversion
    - uniquifier

speller:
  alphabet: 'zyxwvutsrqponmlkjihgfedcba1234567890_*^+'
  delimiter: " '"
  algebra:
    - erase/^xx$/
    - xform/^r5$/er5/
    - abbrev/^([zcs]h).+$/$1/
    - derive/^([nl])ve/$1ue/
    - derive/^([jqxy])u/$1v/
    - derive/un$/uen/
    - derive/ui/uei/
    - derive/iu/iou/
    - derive/ao/oa/
    - derive/([aeiou])ng/$1gn/
    - derive/([iu])a(o|ng?)/a$1$2/
    - derive/^([a-z]+)[0-5]$/$1/
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/
    - derive/ong$/on/
    - "xlit|12345|_*^0+|"
    - derive/a/2/
    - derive/b/2/
    - derive/c/2/
    - derive/d/3/
    - derive/e/3/
    - derive/f/3/
    - derive/g/4/
    - derive/h/4/
    - derive/i/4/
    - derive/j/5/
    - derive/k/5/
    - derive/l/5/
    - derive/m/6/
    - derive/n/6/
    - derive/o/6/
    - derive/p/7/
    - derive/q/7/
    - derive/r/7/
    - derive/s/7/
    - derive/t/8/
    - derive/u/8/
    - derive/v/8/
    - derive/w/9/
    - derive/x/9/
    - derive/y/9/
    - derive/z/9/
    - derive/[_+*^0]//
    - derive/^(.*)$/\U$1/

translator:
  dictionary: terra_pinyin
  prism: terra_jiugong
  spelling_hints: 16 # ～字以內候選標註完整帶調拼音
  preedit_format:
    - xform/([nl])v/$1ü/
    - xform/([nl])ue/$1üe/
    - xform/([jqxy])v/$1u/
    - xform/eh/ê/
  comment_format:
    - xform ([aeiou])(ng?|r)([1234]) $1$3$2
    - xform ([aeo])([iuo])([1234]) $1$3$2
    - xform a1 ā
    - xform a2 á
    - xform a3 ǎ
    - xform a4 à
    - xform e1 ē
    - xform e2 é
    - xform e3 ě
    - xform e4 è
    - xform o1 ō
    - xform o2 ó
    - xform o3 ǒ
    - xform o4 ò
    - xform i1 ī
    - xform i2 í
    - xform i3 ǐ
    - xform i4 ì
    - xform u1 ū
    - xform u2 ú
    - xform u3 ǔ
    - xform u4 ù
    - xform v1 ǖ
    - xform v2 ǘ
    - xform v3 ǚ
    - xform v4 ǜ
    - xform/([nljqxy])v/$1ü/
    - xform/eh[0-5]?/ê/
    - xform/([a-z]+)[0-5]/$1/

custom_phrase:
  dictionary: ""
  user_dict: custom_phrase
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1

reverse_lookup:
  dictionary: liangfen
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: 〔兩分〕
  preedit_format:
    - "xlit|v|ü|"
    - xform/iü/iv/
    - xform/uü/uv/
  comment_format:
    - xform ([aeiou])(ng?|r)([1234]) $1$3$2
    - xform ([aeo])([iuo])([1234]) $1$3$2
    - xform a1 ā
    - xform a2 á
    - xform a3 ǎ
    - xform a4 à
    - xform e1 ē
    - xform e2 é
    - xform e3 ě
    - xform e4 è
    - xform o1 ō
    - xform o2 ó
    - xform o3 ǒ
    - xform o4 ò
    - xform i1 ī
    - xform i2 í
    - xform i3 ǐ
    - xform i4 ì
    - xform u1 ū
    - xform u2 ú
    - xform u3 ǔ
    - xform u4 ù
    - xform v1 ǖ
    - xform v2 ǘ
    - xform v3 ǚ
    - xform v4 ǜ
    - xform/([nljqxy])v/$1ü/
    - xform/eh[0-5]?/ê/
    - xform/([a-z]+)[0-5]/$1/

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    reverse_lookup: "`[a-z]*'?$"